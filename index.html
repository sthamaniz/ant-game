<html>
    <head>
        <title>Ant Game</title>
        <script src="./scripts/constants.js"></script>
        <script src="./scripts/functions.js"></script>
        <script src="./scripts/game.js"></script>
    </head>
    <body>
        <div id="field" style="height:100%;width:100%;background-color:grey;"></div>
        <button id="pause" style="position:absolute; top:0px;">pause</button>

        <script>

            
            const field = document.getElementById('field'); //The field where the ants are going to be displayed
            const game = new Game(field); //Create a game object
            game.init(); //Initialize the ant positions

            let ant = field.children;
            for (let i = 0; i < ant.length; i++) {

                const antPosition = getAntPosition(ant);
    
                let antMovementTop;
                let antMovementLeft;

                setInterval(() => {

                    let xCoordinateOfAntThis = ant[i].offsetLeft+widthOfAnt/2;
                    let yCoordinateOfAntThis = ant[i].offsetTop+heightOfAnt/2;

                    for (let j = 0; j< ant.length; j++) {
                        if (j != i) {
                            let xCoordinateOfAntOther = ant[j].offsetLeft+widthOfAnt/2;
                            let yCoordinateOfAntOther = ant[j].offsetTop+heightOfAnt/2;

                            let differenceOfX = parseFloat(xCoordinateOfAntOther) - parseFloat(xCoordinateOfAntThis);
                            let differenceOfY = parseFloat(yCoordinateOfAntOther) - parseFloat(yCoordinateOfAntThis);
                            let distanceBetweenAnts = Math.sqrt((differenceOfX * differenceOfX) + (differenceOfY * differenceOfY));

                            if (distanceBetweenAnts < widthOfAnt) {
                                
                                if (antMovementTop == 'increase') {
                                    antMovementTop = 'decrease';
                                } else {
                                    antMovementTop = 'increase';
                                }
                                
                                if (antMovementLeft == 'increase') {
                                    antMovementLeft = 'decrease';
                                } else {
                                    antMovementLeft = 'increase';
                                }

                            }

                        }
                    }
 
                    let windowHeight = parseFloat(window.innerHeight) - parseFloat(screenOverFlow);
                    let windowWidth = parseFloat(window.innerWidth) - parseFloat(screenOverFlow);

                    if (antPositionTop <= 10) {
                        antMovementTop = 'increase';
                    } else if (antPositionTop >= windowHeight) {
                        antMovementTop = 'decrease';
                    }
    
                    if (antPositionLeft <= 10) {
                        antMovementLeft = 'increase';
                    } else if (antPositionLeft >= windowWidth) {
                        antMovementLeft = 'decrease';
                    }
    
                    updateAntPosition(ant[i], antMovementTop, antMovementLeft);

                    if (antMovementTop == 'increase') {
                        antPositionTop = parseFloat(antPositionTop) + parseFloat(antMovementSize);
                    } else if (antMovementTop == 'decrease') {
                        antPositionTop = parseFloat(antPositionTop) - parseFloat(antMovementSize);
                    } else {
                        antPositionTop = parseFloat(antPositionTop) + parseFloat(antMovementSize);
                    }
    
                    if (antMovementLeft == 'increase') {
                        antPositionLeft = parseFloat(antPositionLeft) + parseFloat(antMovementSize);
                    } else if (antMovementLeft == 'decrease') {
                        antPositionLeft = parseFloat(antPositionLeft) - parseFloat(antMovementSize);
                    } else {
                        antPositionLeft = parseFloat(antPositionLeft) + parseFloat(antMovementSize);
                    }

                },50);
                
            }
            
        </script>
    </body>
</html>